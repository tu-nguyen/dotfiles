#

if [ -f "$DOTFILE_DIR/setups/setup.sh" ]; then
    . "$DOTFILE_DIR/setups/setup.sh"
fi

r() {
  if [[ "$(pwd)" == *"/dotfiles" ]]; then
    IS_PROJECT_ROOT=true
    DOTFILE_DIR=$(pwd)
  else
    IS_PROJECT_ROOT=false
  fi

  echo "[INFO] Resetting settings.."
  if [ "$IS_PROJECT_ROOT" = false ]; then
    if [[ -n "$DOTFILE_DIR" ]]; then
      pushd $DOTFILE_DIR > /dev/null
    else
      echo "[ERROR] You are not in the root of the dotfile project! Exiting.."
      return
    fi
  fi

  echo "Setup starting.."
  pre_setup

  git pull

  echo "Resetting settings.."
  reset_bashrc
  reset_vimrc
  reset_git_config
  reset_vscode_config
 
  if [ "$IS_PROJECT_ROOT" = false ]; then
    popd > /dev/null
  fi
  echo "You are all set!"
}